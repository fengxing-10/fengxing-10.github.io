"use strict";(self["webpackChunkcourse"]=self["webpackChunkcourse"]||[]).push([[405],{8405:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{width:"100px"}},[t("el-button",{on:{click:e.showAdd}},[t("li",{staticClass:"el-icon-plus"},[e._v("创建")])])],1),t("div",{staticStyle:{display:"flex",width:"400px"}},[t("el-input",{attrs:{placeholder:"课程名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t("el-input",{attrs:{placeholder:"教师名"},model:{value:e.teacherName,callback:function(t){e.teacherName=t},expression:"teacherName"}}),t("el-input",{attrs:{placeholder:"系名"},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.gettable}},[t("li",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)]),t("div",{staticClass:"table-wrapper"},[t("div",{staticClass:"text item"},[t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"课程名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{label:"教师名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.teacherName))])]}}])}),t("el-table-column",{attrs:{label:"系名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.departmentName))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.bianji(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row.id)}}},[e._v("删除")])]}}])})],1)],1)])]),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,total:e.totalpage},on:{"current-change":e.handlePageChange}})],1),t("el-dialog",{attrs:{title:"添加",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("course",{key:e.dialogFormVisible,attrs:{form1:e.form},on:{close:e.handleClose}})],1)],1)},o=[],l=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{prop:"name",label:"课程名"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{prop:"teacherId",label:"授课教师"}},[t("el-select",{attrs:{placeholder:"请选择教师"},model:{value:e.form.teacherId,callback:function(t){e.$set(e.form,"teacherId",t)},expression:"form.teacherId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{prop:"grade",label:"年级"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}})],1),t("el-form-item",{attrs:{prop:"value1",label:"上课时间"}},[t("el-select",{attrs:{placeholder:"请选择星期"},model:{value:e.form.value1,callback:function(t){e.$set(e.form,"value1",t)},expression:"form.value1"}},e._l(e.options1,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),t("el-select",{attrs:{placeholder:"请选择节次"},model:{value:e.form.value2,callback:function(t){e.$set(e.form,"value2",t)},expression:"form.value2"}},e._l(e.options2,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),t("el-form-item",{attrs:{prop:"value3",label:"课时"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.value3,callback:function(t){e.$set(e.form,"value3",t)},expression:"form.value3"}})],1),t("el-form-item",{attrs:{prop:"location",label:"上课地点"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),t("el-form-item",{attrs:{prop:"credit",label:"学分"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.credit,callback:function(t){e.$set(e.form,"credit",t)},expression:"form.credit"}})],1),t("el-form-item",{attrs:{prop:"maxSize",label:"最大人数"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.maxSize,callback:function(t){e.$set(e.form,"maxSize",t)},expression:"form.maxSize"}})],1),t("el-form-item",{attrs:{prop:"examDate",label:"考试时间"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:e.form.examDate,callback:function(t){e.$set(e.form,"examDate",t)},expression:"form.examDate"}})],1),t("el-form-item",{attrs:{prop:"examLocation",label:"考试地点"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.examLocation,callback:function(t){e.$set(e.form,"examLocation",t)},expression:"form.examLocation"}})],1),t("el-form-item",[t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),t("el-button",{on:{click:e.canel}},[e._v("取消")])],1)])],1)],1)},i=[],n=a(9942),s=a(9791),m={props:["form1"],data(){return{form:{id:this.form1.id,name:this.form1.name,credit:this.form1.credit,examDate:this.form1.examDate,examLocation:this.form1.examLocation,grade:this.form1.grade,location:this.form1.location,maxSize:this.form1.maxSize,teacherId:this.form1.teacherId,time:this.form1.time,value1:"",value2:"",value3:""},departments:[],options1:[{value:"1",label:"星期一"},{value:"2",label:"星期二"},{value:"3",label:"星期三"},{value:"4",label:"星期四"},{value:"5",label:"星期五"}],options2:[{value:"1",label:"第一节"},{value:"2",label:"第二节"},{value:"3",label:"第三节"},{value:"4",label:"第四节"},{value:"5",label:"第五节"},{value:"6",label:"第六节"},{value:"7",label:"第七节"},{value:"8",label:"第八节"},{value:"9",label:"第九节"},{value:"10",label:"第十节"}],rules:{name:[{required:!0,message:"请输入课程名",trigger:"blur"}],credit:[{required:!0,message:"请输入学分",trigger:"blur"}],teacherId:[{required:!0,message:"请选择教师",trigger:"change"}],examDate:[{required:!0,message:"请选择考试日期",trigger:"blur"}],examLocation:[{required:!0,message:"请输入考试地址",trigger:"blur"}],grade:[{required:!0,message:"请输入年级",trigger:"blur"}],location:[{required:!0,message:"请输入上课地址",trigger:"blur"}],maxSize:[{required:!0,message:"请输入最大人数",trigger:"blur"}],value1:[{required:!0,message:"请输入上课时间",trigger:"blur"}],value2:[{required:!0,message:"请输入上课时间",trigger:"blur"}],value3:[{required:!0,message:"请输入上课时间",trigger:"blur"}]}}},methods:{getteacherNames(){let e=this.form.time.split("-",3);console.log(e),this.form.value1=e[0],this.form.value2=e[1],this.form.value3=e[2],(0,n.bk)().then(e=>{console.log(e),this.departments=e.data}).catch(e=>{})},submit(){this.form.time=[this.form.value1,this.form.value2,this.form.value3].join("-"),this.$refs["form"].validate(e=>{console.log(e),console.log(this.form),e&&(-1==this.form.id?(0,s.ri)(this.form).then(e=>{console.log(e),0===e.code&&(this.$message({type:"success",message:"添加成功"}),this.$emit("close"))}):(0,s.Uz)(this.form).then(e=>{console.log(e),0===e.code&&(this.$message({type:"success",message:"更新成功"}),this.$emit("close"))}).catch(e=>{}))})},canel(){this.$emit("close")}},mounted(){this.getteacherNames()}},u=m,c=a(1656),d=(0,c.A)(u,l,i,!1,null,null,null),f=d.exports,h={components:{course:f},data(){return{dialogFormVisible:!1,page:1,totalpage:1,name:"",teacherName:"",departmentName:"",tableData:[],form:{id:-1,name:"",credit:"",examDate:"",examLocation:"",grade:"",location:"",maxSize:"",teacherId:"",time:""}}},methods:{showAdd(){this.form.id=-1,this.form.name="",this.form.credit="",this.form.examDate="",this.form.examLocation="",this.form.grade="",this.form.location="",this.form.maxSize="",this.form.teacherId="",this.form.time="",this.dialogFormVisible=!0},handleClose(){this.fenyeZongshu(),this.gettable(),this.dialogFormVisible=!1},gettable(){let e={name:this.name,teacherName:this.teacherName,departmentName:this.departmentName};this.fenyeZongshu(),(0,s.E9)(e,this.page).then(e=>{this.tableData=e.data}).catch(e=>{})},handlePageChange(e){this.page=e,this.gettable()},fenyeZongshu(){let e={name:this.name,teacherName:this.teacherName,departmentName:this.departmentName};(0,s.b6)(e).then(e=>{this.totalpage=10*e.data}).catch(e=>{})},bianji(e){this.form.id=e.id,(0,s.Bf)(this.form.id).then(e=>{console.log(e),this.form.name=e.data.name,this.form.credit=e.data.credit,this.form.examDate=e.data.examDate,this.form.examLocation=e.data.examLocation,this.form.grade=e.data.grade,this.form.location=e.data.location,this.form.maxSize=e.data.maxSize,this.form.teacherId=e.data.teacherId,this.form.time=e.data.time,this.dialogFormVisible=!0}).catch(e=>{})},handleDelete(e){this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{(0,s.bX)(e).then(e=>{0===e.code&&(this.$message({type:"success",message:"删除成功!"}),this.gettable())})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}},mounted(){this.gettable(),this.fenyeZongshu()}},p=h,g=(0,c.A)(p,r,o,!1,null,"7c16a13b",null),b=g.exports},9791:function(e,t,a){a.d(t,{Bf:function(){return n},E9:function(){return i},Uz:function(){return m},b6:function(){return u},bX:function(){return s},ri:function(){return l},xx:function(){return o}});var r=a(5720);function o(){return(0,r.A)({url:"/admin/course/names",method:"get"})}function l(e){return(0,r.A)({url:"/admin/course",method:"post",data:e})}function i(e,t=1){return(0,r.A)({url:"/admin/course/page/"+t,method:"get",params:e})}function n(e){return(0,r.A)({url:"/admin/course/"+e,method:"get"})}function s(e){return(0,r.A)({url:"/admin/course/"+e,method:"delete"})}function m(e){return(0,r.A)({url:"/admin/course",method:"put",data:e})}function u(e){return(0,r.A)({url:"/admin/course/page/count",method:"get",params:e})}},9942:function(e,t,a){a.d(t,{$f:function(){return u},HA:function(){return c},YI:function(){return m},_A:function(){return s},bk:function(){return l},kl:function(){return o},s_:function(){return i},t0:function(){return n}});var r=a(5720);function o(e){return(0,r.A)({url:"/admin/teacher",method:"post",data:e})}function l(){return(0,r.A)({url:"/admin/teacher/names",method:"get"})}function i(e){return(0,r.A)({url:"/admin/teacher/"+e,method:"get"})}function n(e,t=1){return(0,r.A)({url:"/admin/teacher/page/"+t,method:"get",params:e})}function s(e){return(0,r.A)({url:"/admin/teacher/page/count",method:"get",params:e})}function m(e){return(0,r.A)({url:"/admin/teacher/"+e,method:"delete"})}function u(e){return(0,r.A)({url:"/admin/teacher",method:"put",data:e})}function c(e){return(0,r.A)({url:"/admin/teacher/"+e,method:"get"})}}}]);
//# sourceMappingURL=405.3e8ef7c6.js.map