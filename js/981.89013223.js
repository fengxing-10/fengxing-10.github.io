"use strict";(self["webpackChunkcourse"]=self["webpackChunkcourse"]||[]).push([[981],{4981:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{width:"100px"}},[t("el-button",{on:{click:e.showAdd}},[t("li",{staticClass:"el-icon-plus"},[e._v("创建")])])],1),t("div",{staticStyle:{display:"flex",width:"400px"}},[t("el-input",{attrs:{placeholder:"班级名"},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}}),t("el-input",{attrs:{placeholder:"课程名"},model:{value:e.courseName,callback:function(t){e.courseName=t},expression:"courseName"}}),t("el-input",{attrs:{placeholder:"学生名"},model:{value:e.studentName,callback:function(t){e.studentName=t},expression:"studentName"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.gettable}},[t("li",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)]),t("div",{staticClass:"table-wrapper"},[t("div",{staticClass:"text item"},[t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"班级名"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.className))])]}}])}),t("el-table-column",{attrs:{label:"课程名"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.courseName))])]}}])}),t("el-table-column",{attrs:{label:"学生名"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.studentName))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.bianji(r.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(r.row.id)}}},[e._v("删除")])]}}])})],1)],1)])]),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,total:e.totalpage},on:{"current-change":e.handlePageChange}})],1),t("el-dialog",{attrs:{title:"添加",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("xuanKe",{key:e.dialogFormVisible,attrs:{form1:e.form},on:{close:e.handleClose}})],1)],1)},s=[],n=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{prop:"studentId",label:"学生"}},[t("el-select",{attrs:{placeholder:"请选择学生"},model:{value:e.form.studentId,callback:function(t){e.$set(e.form,"studentId",t)},expression:"form.studentId"}},e._l(e.departments1,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{prop:"courseId",label:"课程"}},[t("el-select",{attrs:{placeholder:"请选择课程"},model:{value:e.form.courseId,callback:function(t){e.$set(e.form,"courseId",t)},expression:"form.courseId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{prop:"dailyScore",label:"日常得分"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.dailyScore,callback:function(t){e.$set(e.form,"dailyScore",t)},expression:"form.dailyScore"}})],1),t("el-form-item",{attrs:{prop:"examScore",label:"考试得分"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.examScore,callback:function(t){e.$set(e.form,"examScore",t)},expression:"form.examScore"}})],1),t("el-form-item",{attrs:{prop:"score",label:"总得分"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1),t("el-form-item",[t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),t("el-button",{on:{click:e.canel}},[e._v("取消")])],1)])],1)],1)},o=[],i=r(9791),u=r(6135),l=r(5720);function c(e,t){return(0,l.A)({url:"/admin/student/course/page/"+t,method:"get",params:e})}function d(e){return(0,l.A)({url:"/admin/student/course/page/count",method:"get",params:e})}function m(e){return(0,l.A)({url:"/admin/student/course",method:"post",data:e})}function f(e){return(0,l.A)({url:"/admin/student/course",method:"put",data:e})}function h(e){return(0,l.A)({url:"/admin/student/course/"+e,method:"get"})}function p(e){return(0,l.A)({url:"/admin/student/course/"+e,method:"delete"})}var g={props:["form1"],data(){return{form:{id:this.form1.id,courseId:this.form1.courseId,studentId:this.form1.studentId,dailyScore:this.form1.dailyScore,examScore:this.form1.examScore,score:this.form1.score},departments:[],departments1:[],rules:{name:[{required:!0,message:"请输入课程名",trigger:"blur"}],credit:[{required:!0,message:"请输入学分",trigger:"blur"}],teacherId:[{required:!0,message:"请选择教师",trigger:"change"}],examDate:[{required:!0,message:"请选择考试日期",trigger:"blur"}],examLocation:[{required:!0,message:"请输入考试地址",trigger:"blur"}]}}},methods:{getcourseName(){(0,i.xx)().then(e=>{this.departments=e.data}).catch(e=>{})},getstudentNames(){(0,u.uY)().then(e=>{this.departments1=e.data}).catch(e=>{})},submit(){this.$refs["form"].validate(e=>{e&&(-1==this.form.id?m(this.form).then(e=>{0===e.code&&(this.$message({type:"success",message:"添加成功"}),this.$emit("close"))}):f(this.form).then(e=>{0===e.code&&(this.$message({type:"success",message:"更新成功"}),this.$emit("close"))}).catch(e=>{}))})},canel(){this.$emit("close")}},mounted(){this.getcourseName(),this.getstudentNames()}},b=g,x=r(1656),v=(0,x.A)(b,n,o,!1,null,null,null),y=v.exports,N={components:{xuanKe:y},data(){return{dialogFormVisible:!1,page:1,totalpage:1,className:"",courseName:"",studentName:"",tableData:[],form:{id:-1,studentName:"",courseId:"",studentId:"",dailyScore:"",examScore:"",score:""}}},methods:{showAdd(){this.form.id=-1,this.form.courseId="",this.form.studentId="",this.form.examScore="",this.form.dailyScore="",this.form.score="",this.dialogFormVisible=!0},handleClose(){this.fenyeZongshu(),this.gettable(),this.dialogFormVisible=!1},gettable(){let e={className:this.className,courseName:this.courseName,studentName:this.studentName};this.fenyeZongshu(),c(e,this.page).then(e=>{console.log(e),this.tableData=e.data}).catch(e=>{})},handlePageChange(e){this.page=e,this.gettable()},fenyeZongshu(){let e={className:this.className,courseName:this.courseName,studentName:this.studentName};d(e).then(e=>{console.log(e),this.totalpage=10*e.data}).catch(e=>{})},bianji(e){this.form.id=e.id,h(this.form.id).then(e=>{console.log(e),this.form.courseId=e.data.courseId,this.form.studentId=e.data.studentId,this.form.examScore=e.data.examScore,this.form.dailyScore=e.data.dailyScore,this.form.score=e.data.score,this.dialogFormVisible=!0}).catch(e=>{})},handleDelete(e){this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{p(e).then(e=>{0===e.code&&(this.$message({type:"success",message:"删除成功!"}),this.gettable())})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}},mounted(){this.gettable(),this.fenyeZongshu()}},S=N,k=(0,x.A)(S,a,s,!1,null,"b9ee70d2",null),A=k.exports},6135:function(e,t,r){r.d(t,{B_:function(){return u},It:function(){return n},NT:function(){return o},ch:function(){return l},ph:function(){return s},uY:function(){return c},wO:function(){return i}});var a=r(5720);function s(e){return(0,a.A)({url:"/admin/student",method:"post",data:e})}function n(e,t=1){return(0,a.A)({url:"/admin/student/page/"+t,method:"post",params:e})}function o(e){return(0,a.A)({url:"/admin/student/page/count",method:"post",params:e})}function i(e){return(0,a.A)({url:"/admin/student/"+e,method:"get"})}function u(e){return(0,a.A)({url:"/admin/student/"+e,method:"delete"})}function l(e){return(0,a.A)({url:"/admin/student",method:"put",data:e})}function c(){return(0,a.A)({url:"/admin/student/names",method:"get"})}},9791:function(e,t,r){r.d(t,{Bf:function(){return i},E9:function(){return o},Uz:function(){return l},b6:function(){return c},bX:function(){return u},ri:function(){return n},xx:function(){return s}});var a=r(5720);function s(){return(0,a.A)({url:"/admin/course/names",method:"get"})}function n(e){return(0,a.A)({url:"/admin/course",method:"post",data:e})}function o(e,t=1){return(0,a.A)({url:"/admin/course/page/"+t,method:"get",params:e})}function i(e){return(0,a.A)({url:"/admin/course/"+e,method:"get"})}function u(e){return(0,a.A)({url:"/admin/course/"+e,method:"delete"})}function l(e){return(0,a.A)({url:"/admin/course",method:"put",data:e})}function c(e){return(0,a.A)({url:"/admin/course/page/count",method:"get",params:e})}}}]);
//# sourceMappingURL=981.89013223.js.map