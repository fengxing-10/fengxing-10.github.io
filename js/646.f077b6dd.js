"use strict";(self["webpackChunkcourse"]=self["webpackChunkcourse"]||[]).push([[646],{7646:function(e,t,l){l.r(t),l.d(t,{default:function(){return _}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{width:"100px"}},[t("el-button",{on:{click:e.showAdd}},[t("li",{staticClass:"el-icon-plus"},[e._v("创建")])])],1)]),t("div",{staticClass:"table-wrapper"},[t("div",{staticClass:"text item"},[t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"管理员账号"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(l.row.username))])]}}])}),t("el-table-column",{attrs:{label:"权限"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(l.row.privilege))])]}}])}),t("el-table-column",{attrs:{label:"密码"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(l.row.password))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.bianji(l.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(l.row.id)}}},[e._v("删除")])]}}])})],1)],1)])]),t("el-dialog",{attrs:{title:"添加",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("admin",{key:e.dialogFormVisible,attrs:{form1:e.form},on:{close:e.handleClose}})],1)],1)},i=[],s=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{prop:"username",label:"管理员账号"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{prop:"privilege",label:"权限"}},[t("el-checkbox",{model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},[e._v("系管理")]),t("el-checkbox",{model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},[e._v("专业管理")]),t("el-checkbox",{model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}},[e._v("班级管理")]),t("el-checkbox",{model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}},[e._v("学生管理")]),t("el-checkbox",{model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}},[e._v("教师管理")]),t("el-checkbox",{model:{value:e.value6,callback:function(t){e.value6=t},expression:"value6"}},[e._v("课程管理")]),t("el-checkbox",{model:{value:e.value7,callback:function(t){e.value7=t},expression:"value7"}},[e._v("选课修改")]),t("el-checkbox",{model:{value:e.value8,callback:function(t){e.value8=t},expression:"value8"}},[e._v("管理员管理")])],1),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",[t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),t("el-button",{on:{click:e.canel}},[e._v("取消")])],1)])],1)],1)},o=[],r=l(5720);function u(){return(0,r.A)({url:"/admin/admin",method:"get"})}function n(e){return(0,r.A)({url:"/admin/admin",method:"post",data:e})}function c(e){return(0,r.A)({url:"/admin/admin",method:"put",data:e})}function m(e){return(0,r.A)({url:"/admin/admin/"+e,method:"get"})}function h(e){return(0,r.A)({url:"/admin/admin/"+e,method:"delete"})}var v={props:["form1"],data(){return{form:{id:this.form1.id,username:this.form1.username,privilege:this.form1.privilege,password:this.form1.password},departments:[],departments1:[],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}]},value1:!1,value2:!1,value3:!1,value4:!1,value5:!1,value6:!1,value7:!1,value8:!1}},methods:{submit(){this.$refs["form"].validate(e=>{this.value1=1==this.value1?"1":"0",this.value2=1==this.value2?"1":"0",this.value3=1==this.value3?"1":"0",this.value4=1==this.value4?"1":"0",this.value5=1==this.value5?"1":"0",this.value6=1==this.value6?"1":"0",this.value7=1==this.value7?"1":"0",this.value8=1==this.value8?"1":"0";let t=this.value8+this.value7+this.value6+this.value5+this.value4+this.value3+this.value2+this.value1;this.form.privilege=parseInt(t,2),e&&(-1==this.form.id?n(this.form).then(e=>{0===e.code&&(this.$message({type:"success",message:"添加成功"}),this.$emit("close"))}):c(this.form).then(e=>{console.log(e),0===e.code&&(this.$message({type:"success",message:"更新成功"}),this.$emit("close"))}).catch(e=>{}))})},canel(){this.$emit("close")},getPri(){this.form.privilege=this.form.privilege.toString(2),this.value8=1==Math.floor(this.form.privilege/1e7),this.value7=1==Math.floor(this.form.privilege%1e7/1e6),this.value6=1==Math.floor(this.form.privilege%1e6/1e5),this.value5=1==Math.floor(this.form.privilege%1e5/1e4),this.value4=1==Math.floor(this.form.privilege%1e4/1e3),this.value3=1==Math.floor(this.form.privilege%1e3/100),this.value2=1==Math.floor(this.form.privilege%100/10),this.value1=1==Math.floor(this.form.privilege%10)}},mounted(){this.getPri()}},d=v,f=l(1656),p=(0,f.A)(d,s,o,!1,null,null,null),b=p.exports,g={components:{admin:b},data(){return{dialogFormVisible:!1,page:1,totalpage:1,password:"",privilege:"",username:"",tableData:[],form:{id:-1,password:"",privilege:"",username:""}}},methods:{showAdd(){this.form.id=-1,this.form.password="",this.form.privilege="",this.form.username="",this.dialogFormVisible=!0},handleClose(){this.gettable(),this.dialogFormVisible=!1},gettable(){u().then(e=>{this.tableData=e.data}).catch(e=>{})},bianji(e){this.form.id=e.id,m(this.form.id).then(e=>{this.form.password=e.data.password,this.form.privilege=e.data.privilege,this.form.username=e.data.username,this.dialogFormVisible=!0}).catch(e=>{})},handleDelete(e){this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h(e).then(e=>{0===e.code&&(this.$message({type:"success",message:"删除成功!"}),this.gettable())}).catch(e=>{})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}},mounted(){this.gettable()}},k=g,x=(0,f.A)(k,a,i,!1,null,"28638431",null),_=x.exports}}]);
//# sourceMappingURL=646.f077b6dd.js.map