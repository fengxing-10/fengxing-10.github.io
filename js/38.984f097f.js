"use strict";(self["webpackChunkcourse"]=self["webpackChunkcourse"]||[]).push([[38],{2233:function(e,t,a){a.d(t,{AG:function(){return l},gK:function(){return r},jO:function(){return m},n:function(){return o},oJ:function(){return i},s7:function(){return n}});var s=a(5720);function r(e){return(0,s.A)({url:"/admin/class",method:"post",data:e})}function n(){return(0,s.A)({url:"/admin/class/names",method:"get"})}function o(e,t=1){return(0,s.A)({url:"/admin/class/page/"+t,method:"get",params:e})}function l(e){return(0,s.A)({url:"/admin/class/page/count",method:"get",params:e})}function i(e){return(0,s.A)({url:"/admin/class/"+e,method:"delete"})}function m(e){return(0,s.A)({url:"/admin/class",method:"put",data:e})}},4038:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{width:"100px"}},[t("el-button",{on:{click:e.showAdd}},[t("li",{staticClass:"el-icon-plus"},[e._v("创建")])])],1),t("div",{staticStyle:{display:"flex",width:"400px"}},[t("el-input",{attrs:{placeholder:"学生名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t("el-input",{attrs:{placeholder:"专业名"},model:{value:e.majorName,callback:function(t){e.majorName=t},expression:"majorName"}}),t("el-input",{attrs:{placeholder:"班级名"},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.gettable}},[t("li",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)]),t("div",{staticClass:"table-wrapper"},[t("div",{staticClass:"text item"},[t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"学生名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{label:"专业名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.majorName))])]}}])}),t("el-table-column",{attrs:{label:"班级名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.className))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.bianji(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row.id)}}},[e._v("删除")])]}}])})],1)],1)])]),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,total:e.totalpage},on:{"current-change":e.handlePageChange}})],1),t("el-dialog",{attrs:{title:"添加",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("students",{key:e.dialogFormVisible,attrs:{form1:e.form},on:{close:e.handleClose}})],1)],1)},r=[],n=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{prop:"name",label:"姓名"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{prop:"number",label:"学号"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),t("el-form-item",{attrs:{prop:"classId",label:"所属班级"}},[t("el-select",{attrs:{placeholder:"请选择班级"},model:{value:e.form.classId,callback:function(t){e.$set(e.form,"classId",t)},expression:"form.classId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{prop:"password",label:"密码"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",{attrs:{prop:"birthday",label:"生日"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio",{attrs:{label:"0"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")]),t("el-radio",{attrs:{label:"1"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")])],1),t("el-form-item",[t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),t("el-button",{on:{click:e.canel}},[e._v("取消")])],1)])],1)],1)},o=[],l=a(2233),i=a(6135),m={props:["form1"],data(){return{form:{id:this.form1.id,name:this.form1.name,number:this.form1.number,classId:this.form1.classId,email:this.form1.email,password:this.form1.password,birthday:this.form1.birthday,sex:"0"},departments:[],rules:{name:[{required:!0,message:"请输入学生姓名",trigger:"blur"}],number:[{required:!0,message:"请输入学号",trigger:"blur"}],classId:[{required:!0,message:"请选择班级",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],birthday:[{required:!0,message:"请选择生日",trigger:"change"}]}}},methods:{getcalssName(){(0,l.s7)().then(e=>{this.form.sex=this.form1.sex+"",this.departments=e.data}).catch(e=>{})},submit(){this.$refs["form"].validate(e=>{console.log(e),e&&(-1==this.form.id?(0,i.ph)(this.form).then(e=>{console.log(e),0===e.code&&(this.$message({type:"success",message:"添加成功"}),this.$emit("close"))}):(0,i.ch)(this.form1).then(e=>{console.log(e),0===e.code&&(this.$message({type:"success",message:"更新成功"}),this.$emit("close"))}).catch(e=>{}))})},canel(){this.$emit("close")}},mounted(){this.getcalssName()}},u=m,c=a(1656),d=(0,c.A)(u,n,o,!1,null,null,null),f=d.exports,h={components:{students:f},data(){return{dialogFormVisible:!1,name:"",majorName:"",className:"",tableData:[],page:1,totalpage:1,form:{id:-1,name:"",majorName:"",className:"",birthday:"",classId:"",email:"",name:"",number:"",password:"",sex:"0"}}},methods:{showAdd(){this.form.id=-1,this.form.name="",this.form.className="",this.form.birthday="",this.form.classId="",this.form.email="",this.form.name="",this.form.number="",this.form.password="",this.form.sex="0",this.dialogFormVisible=!0},handleClose(){this.fenyeZongshu(),this.gettable(),this.dialogFormVisible=!1},handlePageChange(e){this.page=e,this.gettable()},fenyeZongshu(){let e={name:this.name,majorName:this.majorName,className:this.className};(0,i.NT)(e).then(e=>{this.totalpage=10*e.data}).catch(e=>{})},gettable(){let e={name:this.name,majorName:this.majorName,className:this.className};this.fenyeZongshu(),(0,i.It)(e,this.page).then(e=>{this.tableData=e.data}).catch(e=>{})},bianji(e){this.form.id=e.id,(0,i.wO)(e.id).then(e=>{this.form.birthday=e.data.birthday,this.form.classId=e.data.classId,this.form.email=e.data.email,this.form.name=e.data.name,this.form.number=e.data.number,this.form.password=e.data.password,this.form.sex=e.data.sex,this.dialogFormVisible=!0}).catch(e=>{})},handleDelete(e){this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{(0,i.B_)(e).then(e=>{0===e.code&&(this.$message({type:"success",message:"删除成功!"}),this.gettable())})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}},mounted(){this.gettable(),this.fenyeZongshu()}},p=h,b=(0,c.A)(p,s,r,!1,null,"166d4c30",null),g=b.exports},6135:function(e,t,a){a.d(t,{B_:function(){return i},It:function(){return n},NT:function(){return o},ch:function(){return m},ph:function(){return r},uY:function(){return u},wO:function(){return l}});var s=a(5720);function r(e){return(0,s.A)({url:"/admin/student",method:"post",data:e})}function n(e,t=1){return(0,s.A)({url:"/admin/student/page/"+t,method:"post",params:e})}function o(e){return(0,s.A)({url:"/admin/student/page/count",method:"post",params:e})}function l(e){return(0,s.A)({url:"/admin/student/"+e,method:"get"})}function i(e){return(0,s.A)({url:"/admin/student/"+e,method:"delete"})}function m(e){return(0,s.A)({url:"/admin/student",method:"put",data:e})}function u(){return(0,s.A)({url:"/admin/student/names",method:"get"})}}}]);
//# sourceMappingURL=38.984f097f.js.map