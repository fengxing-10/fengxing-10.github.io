"use strict";(self["webpackChunkcourse"]=self["webpackChunkcourse"]||[]).push([[763],{6763:function(e,t,o){o.r(t),o.d(t,{default:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("div"),t("div",{staticStyle:{display:"flex",width:"400px"}},[t("el-input",{attrs:{placeholder:"班级名"},model:{value:e.courseName,callback:function(t){e.courseName=t},expression:"courseName"}}),t("el-input",{attrs:{placeholder:"学生名"},model:{value:e.studentName,callback:function(t){e.studentName=t},expression:"studentName"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.gettable}},[t("li",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)]),t("div",{staticClass:"table-wrapper"},[t("div",{staticClass:"text item"},[t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"课程名"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(o.row.courseName))])]}}])}),t("el-table-column",{attrs:{label:"学生姓名"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(o.row.studentName))])]}}])}),t("el-table-column",{attrs:{label:"日常分"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(o.row.dailyScore))])]}}])}),t("el-table-column",{attrs:{label:"考试分"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(o.row.examScore))])]}}])}),t("el-table-column",{attrs:{label:"成绩"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(o.row.score))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.bianji(o.row)}}},[e._v("录入")])]}}])})],1)],1)])]),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,total:e.totalpage},on:{"current-change":e.handlePageChange}})],1),t("el-dialog",{attrs:{title:"录入",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("bianji",{key:e.dialogFormVisible,attrs:{form1:e.form},on:{close:e.handleClose}})],1)],1)},a=[],s=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{prop:"dailyScore",label:"日常成绩"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.dailyScore,callback:function(t){e.$set(e.form,"dailyScore",t)},expression:"form.dailyScore"}})],1),t("el-form-item",{attrs:{prop:"examScore",label:"考试成绩"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.examScore,callback:function(t){e.$set(e.form,"examScore",t)},expression:"form.examScore"}})],1),t("el-form-item",{attrs:{prop:"score",label:"总成绩"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1),t("el-form-item",[t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),t("el-button",{on:{click:e.canel}},[e._v("取消")])],1)])],1)],1)},l=[],n=o(9968),i={props:["form1"],data(){return{form:{studentCourseId:this.form1.id,dailyScore:this.form1.dailyScore,examScore:this.form1.examScore,score:this.form1.score},departments:[],rules:{dailyScore:[{required:!0,message:"请输入日常成绩",trigger:"blur"}],examScore:[{required:!0,message:"输入考试成绩",trigger:"blur"}],score:[{required:!0,message:"请输入总成绩",trigger:"blur"}]}}},methods:{submit(){this.$refs["form"].validate(e=>{console.log(e),e&&(0,n.pw)(this.form).then(e=>{console.log(e),0===e.code&&(this.$message({type:"success",message:"更新成功"}),this.$emit("close"))}).catch(e=>{console.log(e)})})},canel(){this.$emit("close")}}},c=i,u=o(1656),m=(0,u.A)(c,s,l,!1,null,null,null),d=m.exports,f={components:{bianji:d},data(){return{courseName:"",studentName:"",tableData:[],dialogFormVisible:!1,totalpage:1,page:1,form:{id:-1,dailyScore:"",examScore:"",score:""}}},methods:{showAdd(){this.form.id=-1,this.form.dailyScore="",this.form.examScore="",this.form.score="",this.dialogFormVisible=!0},handleClose(){this.fenyeZongshu(),this.gettable(),this.dialogFormVisible=!1},bianji(e){this.form.id=e.studentCourseId,console.log(this.form.id),(0,n.mI)(this.form.id).then(t=>{console.log(t),0===t.code&&(this.form.dailyScore=e.dailyScore,this.form.examScore=e.examScore,this.form.score=e.score,this.dialogFormVisible=!0)}).catch(e=>{console.log(e)})},gettable(){let e={courseName:this.courseName,studentName:this.studentName};this.fenyeZongshu(),(0,n.lj)(e,this.page).then(e=>{console.log(e),this.tableData=e.data}).catch(e=>{console.log(e)})},handlePageChange(e){this.page=e,this.gettable()},fenyeZongshu(){let e={courseName:this.courseName,studentName:this.studentName};(0,n.Z1)(e).then(e=>{this.totalpage=10*e.data})}},mounted(){this.gettable(),this.fenyeZongshu()}},h=f,p=(0,u.A)(h,r,a,!1,null,"c9d8e5f8",null),g=p.exports},9968:function(e,t,o){o.d(t,{AL:function(){return a},YT:function(){return s},Z1:function(){return n},lj:function(){return l},mI:function(){return i},pw:function(){return c}});var r=o(5720);function a(){return(0,r.A)({url:"/teacher/course/list",method:"get"})}function s(){return(0,r.A)({url:"/teacher/timetable",method:"get"})}function l(e,t){return(0,r.A)({url:"/teacher/grade/page/"+t,method:"get",params:e})}function n(e){return(0,r.A)({url:"/teacher/grade/page/count",method:"get",params:e})}function i(e){return(0,r.A)({url:"/teacher/grade/"+e,method:"get"})}function c(e){return(0,r.A)({url:"/teacher/grade",method:"put",data:e})}}}]);
//# sourceMappingURL=763.db11e095.js.map