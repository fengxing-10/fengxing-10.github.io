"use strict";(self["webpackChunkcourse"]=self["webpackChunkcourse"]||[]).push([[143],{364:function(e,t,a){a.d(t,{HL:function(){return i},IP:function(){return r},Uh:function(){return o},Vi:function(){return l},fg:function(){return m},gO:function(){return s}});var n=a(5720);function r(e,t=1){return(0,n.A)({url:"/admin/department/page/"+t,method:"get",params:e})}function s(e){return(0,n.A)({url:"/admin/department/page/count",method:"get",params:e})}function o(e){return(0,n.A)({url:"/admin/department",method:"post",data:e})}function i(e){return(0,n.A)({url:"/admin/department/"+e,method:"delete"})}function l(){return(0,n.A)({url:"/admin/department/names",method:"get"})}function m(e){return(0,n.A)({url:"/admin/department",method:"put",data:e})}},2524:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{width:"100px"}},[t("el-button",{on:{click:e.showAdd}},[t("li",{staticClass:"el-icon-plus"},[e._v("创建")])])],1),t("div",{staticStyle:{display:"flex",width:"400px"}},[t("el-input",{attrs:{placeholder:"教师名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t("el-input",{attrs:{placeholder:"系名"},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.gettable}},[t("li",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)]),t("div",{staticClass:"table-wrapper"},[t("div",{staticClass:"text item"},[t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"教师名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{label:"系名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.departmentName))])]}}])}),t("el-table-column",{attrs:{label:"教师工号"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.number))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.bianji(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row.id)}}},[e._v("删除")])]}}])})],1)],1)])]),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,total:e.totalpage},on:{"current-change":e.handlePageChange}})],1),t("el-dialog",{attrs:{title:"添加",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("teacher",{key:e.dialogFormVisible,attrs:{form1:e.form},on:{close:e.handleClose}})],1)],1)},r=[],s=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{prop:"number",label:"教师工号"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),t("el-form-item",{attrs:{prop:"name",label:"教师姓名"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{prop:"departmentId",label:"所属系"}},[t("el-select",{attrs:{placeholder:"请选择系"},model:{value:e.form.departmentId,callback:function(t){e.$set(e.form,"departmentId",t)},expression:"form.departmentId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{prop:"password",label:"登录密码"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",[t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),t("el-button",{on:{click:e.canel}},[e._v("取消")])],1)])],1)],1)},o=[],i=a(364),l=a(9942),m={props:["form1"],data(){return{form:{id:this.form1.id,name:this.form1.name,number:this.form1.number,password:this.form1.password,departmentId:this.form1.departmentId},departments:[],rules:{name:[{required:!0,message:"请输入班级名",trigger:"blur"}],number:[{required:!0,message:"请选择年级",trigger:"blur"}],departmentId:[{required:!0,message:"请选择专业",trigger:"change"}],password:[{required:!0,message:"请选择年级",trigger:"blur"}]}}},methods:{getcalssName(){(0,i.Vi)().then(e=>{this.departments=e.data}).catch(e=>{})},getTeacher(){(0,l.s_)(1).then(e=>{}).catch(e=>{})},submit(){this.$refs["form"].validate(e=>{e&&(-1==this.form.id?(0,l.kl)(this.form).then(e=>{0===e.code&&(this.$message({type:"success",message:"添加成功"}),this.$emit("close"))}):(0,l.$f)(this.form).then(e=>{0===e.code&&(this.$message({type:"success",message:"更新成功"}),this.$emit("close"))}).catch(e=>{}))})},canel(){this.$emit("close")}},mounted(){this.getcalssName(),this.getTeacher()}},u=m,d=a(1656),c=(0,d.A)(u,s,o,!1,null,null,null),f=c.exports,h={components:{teacher:f},data(){return{dialogFormVisible:!1,page:1,totalpage:1,tableData:[],name:"",departmentName:"",form:{id:-1,name:"",departmentId:"",number:"",password:""}}},methods:{showAdd(){this.form.id=-1,this.form.name="",this.form.departmentId="",this.form.number="",this.form.password="",this.dialogFormVisible=!0},handleClose(){this.fenyeZongshu(),this.gettable(),this.dialogFormVisible=!1},handlePageChange(e){this.page=e,this.gettable()},fenyeZongshu(){let e={name:this.name,departmentName:this.departmentName};(0,l._A)(e).then(e=>{this.totalpage=10*e.data}).catch(e=>{})},gettable(){let e={name:this.name,departmentName:this.departmentName};this.fenyeZongshu(),(0,l.t0)(e,this.page).then(e=>{this.tableData=e.data}).catch(e=>{})},bianji(e){this.form.id=e.id,(0,l.HA)(this.form.id).then(e=>{this.form.name=e.data.name,this.form.departmentId=e.data.departmentId,this.form.number=e.data.number,this.form.password=e.data.password,this.dialogFormVisible=!0}).catch(e=>{})},handleDelete(e){this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{(0,l.YI)(e).then(e=>{0===e.code&&(this.$message({type:"success",message:"删除成功!"}),this.gettable())})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}},mounted(){this.gettable(),this.fenyeZongshu()}},p=h,g=(0,d.A)(p,n,r,!1,null,"28ecec85",null),b=g.exports},9942:function(e,t,a){a.d(t,{$f:function(){return u},HA:function(){return d},YI:function(){return m},_A:function(){return l},bk:function(){return s},kl:function(){return r},s_:function(){return o},t0:function(){return i}});var n=a(5720);function r(e){return(0,n.A)({url:"/admin/teacher",method:"post",data:e})}function s(){return(0,n.A)({url:"/admin/teacher/names",method:"get"})}function o(e){return(0,n.A)({url:"/admin/teacher/"+e,method:"get"})}function i(e,t=1){return(0,n.A)({url:"/admin/teacher/page/"+t,method:"get",params:e})}function l(e){return(0,n.A)({url:"/admin/teacher/page/count",method:"get",params:e})}function m(e){return(0,n.A)({url:"/admin/teacher/"+e,method:"delete"})}function u(e){return(0,n.A)({url:"/admin/teacher",method:"put",data:e})}function d(e){return(0,n.A)({url:"/admin/teacher/"+e,method:"get"})}}}]);
//# sourceMappingURL=143.d52522f4.js.map